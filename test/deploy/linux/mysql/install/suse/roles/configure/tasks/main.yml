---
- debug:
    msg: Install MySQL

- name: Download MySQL SUSE repository
  shell: "wget https://dev.mysql.com/get/mysql80-community-release-sles12-3.noarch.rpm"
  become: yes

- name: Install MySQL SUSE repository
  shell: "rpm -ivh mysql80-community-release-sles12-3.noarch.rpm"
  become: yes

- name: Import GPG key for MySQL SUSE repository
  shell: "rpm --import /etc/RPM-GPG-KEY-mysql"
  become: yes

- name: Refresh zypper repository information
  shell: "zypper refresh"
  become: yes

- name: Install MySQL
  shell: "zypper -n install mysql-community-server"
  become: yes

- name: Enable MySQL service
  shell: "/sbin/chkconfig --add mysql"

- name: Restart MySQL
  shell: "systemctl restart mysqld"
  become: yes
