---
- debug:
    msg: Install MySQL

- name: Install MySQL
  shell: "zypper -n install mysql"
  become: yes

- name: Enable MySQL service
  shell: "/sbin/chkconfig --add mysql"
  
- name: Check if default DB exists
  shell: "mysql -e 'SHOW DATABASES;' | grep 'mysql'"
  register: dbstatus
  failed_when: dbstatus.rc == 1 ## fail when no such database exists

- name: Restart MySQL
  shell: "systemctl restart mysql"
  become: yes
