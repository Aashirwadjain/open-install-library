---
- debug:
    msg: Install Cassandra

- name: Get latest packages info
  shell: "apt-get update -y"
  become: true

- name: Install gnupg
  shell: "apt-get install gnupg -y"
  become: true

- name: Install Java
  shell: "apt-get install default-jre -y"
  become: true

- name: Add apache repository of Cassandra
  shell: echo "deb http://www.apache.org/dist/cassandra/debian 311x main" | tee -a /etc/apt/sources.list.d/cassandra.sources.list"
  become: true

- name: Add Cassandra repository key
  shell: "apt-key adv --keyserver pool.sks-keyservers.net --recv-key E91335D77E3E87CB"
  become: true

- name: Get latest packages info
  shell: "apt-get update -y"
  become: true

- name: install the Cassandra engine
  shell: "apt install cassandra -y"
  become: true

- name: Restart Cassandra
  shell: "service cassandra restart"
  become: true
